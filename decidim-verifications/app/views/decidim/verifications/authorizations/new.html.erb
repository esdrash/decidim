<% content_for :js_content do %>
  <%= javascript_pack_tag "decidim_verifications" %>
<% end %>

<% content_for :css_content do %>
  <%= stylesheet_pack_tag "decidim_verifications", media: "all" %>
<% end %>

<%= render layout: "layouts/decidim/shared/layout_center" do %>
  <div class="text-center py-10">
    <h1 class="h1 decorator inline-block text-left">
      <%= t("decidim.verifications.authorizations.new.authorize_with", authorizer: t("#{handler.handler_name}.name", scope: "decidim.authorization_handlers")) %>
    </h1>
  </div>

  <div class="mb-24">
    <%= authorization_form_for(handler, url: authorizations_path(redirect_url: redirect_url)) do |form| %>
      <% if lookup_context.exists?(handler.to_partial_path, [], true) %>
        <%= render partial: handler.to_partial_path, locals: { handler: handler, form: form } %>
      <% else %>
        <div class="form__wrapper">
          <%= form.all_fields %>
        </div>
      <% end %>

      <div class="form__wrapper-block flex-row justify-between">
        <%# REDESIGN_PENDING: link to main index %>
        <a href="" class="button button__lg button__text-secondary">
          <%= icon "arrow-left-line", class: "fill-current" %>
          <%= t("decidim.wizard_step_form.wizard_aside.back") %>
        </a>
        <button type="submit" class="button button__lg button__secondary">
          <%= t("decidim.verifications.authorizations.new.authorize") %>
          <%= icon "arrow-right-line", class: "fill-current" %>
        </button>
      </div>
    <% end %>
    <p class="prose prose-a:text-secondary">
      <%= t("decidim.verifications.authorizations.skip_verification", link: link_to(t("decidim.verifications.authorizations.start_exploring"), cta_button_path).html_safe).html_safe %>.
    </p>
  </div>
<% end %>
